<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />

    <title>Document</title>

    <style>
      .terminal {
        font-family: Consolas;
        height: 50vw;
        max-height: 100%;
        max-width: 100%;
        width: 50vw;
      }
      .terminal-header {
        color: cyan;
      }
      .terminal-output {
        color: snow;
        font-size: 80%;
        overflow-y: scroll;
      }
    </style>
    <style>
      *::-webkit-scrollbar-track {
        background-color: transparent;
      }

      *::-webkit-scrollbar {
        width: 12px;
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 1rem;
      }

      *::-webkit-scrollbar-thumb {
        border-radius: 1rem;

        background-color: white;
      }
    </style>
  </head>
  <body class="w-100 h-100">
    <div class="d-flex align-items-center justify-content-center w-100 h-100">
      <div
        id="result"
        class="col-6 bg-dark text-white terminal d-flex flex-column rounded"
      >
        <span class="terminal-header"> output&gt;</span>
        <div id="output" class="terminal-output flex-grow-1"></div>
      </div>
    </div>

    <script>
      //selectors
      const $ = document.querySelector.bind(document),
        $$ = document.querySelectorAll.bind(document);

      const output = $("#output");
      const events = new EventSource("/events");
      events.addEventListener("message", ev => {
        const data = JSON.parse(event.data);
        //show
        switch (data.packet) {
          case "msg":
            {
              output.innerHTML += `${output.innerHTML ? "<br>" : ""} ${
                new Date()
                  .toISOString()
                  .split("T")[1]
                  .split(".")[0]
              }: ${data.content}`;
            }
            break;
        }
        //scroll
        output.scrollTop = output.scrollHeight - output.clientHeight;
      });
    </script>
  </body>
</html>
